"use strict";var ui={editor_create:function(b){var a=new UE.ui.Editor();a.addListener("ready",function(){this.focus()});a.addListener("afterPaste",function(c,d){a.fireEvent("pasteTransfer",2)});a.render(b)},btn_select_all:function(a){if(a instanceof String){a+=" "}else{a=""}$(a+"#select-all").on("click",function(b){b.preventDefault();$(a+'.select-list input[type="checkbox"].select-it').each(function(c,d){d.checked=true;$(d).addClass("checked")});$(a+"#selectbox-all")[0].checked=true;$(a+"#unselect-all").show(300).css("display","inline-block")});$(a+"#selectbox-all").on("change",function(b){b.preventDefault();if(this.checked){$(a+'.select-list  input[type="checkbox"].select-it').each(function(c,d){d.checked=true;$(d).addClass("checked")});$(a+"#unselect-all").show(300).css("display","inline-block")}else{$(a+'.select-list  input[type="checkbox"].select-it').each(function(c,d){d.checked=false;$(d).removeClass("checked")});$(a+"#unselect-all").hide(300)}});$(a+"#unselect-all").on("click",function(b){b.preventDefault();$(a+'.select-list  input[type="checkbox"].select-it.checked').each(function(c,d){d.checked=false;$(d).removeClass("checked")});$(a+"#selectbox-all")[0].checked=false;$(a+"#unselect-all").hide(300)});$(a+".select-list").delegate('input[type="checkbox"].select-it',"change",function(b){b.preventDefault();if(this.checked){$(this).addClass("checked");$(a+"#unselect-all").show(300).css("display","inline-block")}else{$(this).removeClass("checked");$(a+"#selectbox-all")[0].checked=false;if(tools.isEmptyValue($(a+".select-list .checked"))){$(a+"#unselect-all").hide(300)}}})},btn_switch:function(){$("div.btn-switch").delegate("a[data-value]","click",function(c){c.preventDefault();var a=$(this).parent();var b=$(this).data("value");a.next('input[type="hidden"]').val(b);a.children("a").removeClass("btn-primary");$(this).addClass("btn-primary")})},modal_link:function(){$('a[data-toggle="modal-link"]').click(function(b){b.preventDefault();var a=$(this).attr("href");if(a.indexOf("#")==0){$(a).modal("open")}else{$.get(a,function(c){$('<div class="modal hide fade">'+c+"</div>").modal()}).success(function(){$("input:text:visible:first").focus()})}})},notify:function(a){$.each(a,function(b,c){$.pnotify({title:c.title,text:c.text,type:c.type,animation:"fade"})})},alert:function(a,b){if(!b){b="error"}return'<div class="alert alert-'+b+'"> <button type="button" class="close" data-dismiss="alert"> <i class="fa fa-times"></i> </button> '+a+" </div>"},fancybox_img:function(){$(".fancybox-img").fancybox({type:"image",openEffect:"elastic",closeEffect:"elastic",helpers:{title:{type:"float"}}})},btn_ajax_do:function(d,a,c,b){$(".select-list").delegate(".btn-ajax-"+c,"click",function(e){e.preventDefault();var f={id:$(this).attr("data-id"),status:$(this).attr(b),it:$(this)};$.ajax({url:a,type:"POST",dataType:"json",data:{ids:f.id,status:f.status,_cfs:$.cookie("_cfc")}}).done(function(g){console.log("success");var h={title:"",text:g.msg,type:"",delay:3000};if(g.status==1){h.title="OK!";if(f.status==1){h.type="success";f.it.addClass("btn-primary").attr("data-hint","取消"+d).attr(b,"0")}else{h.type="notice";f.it.removeClass("btn-primary").attr("data-hint",d).attr(b,"1")}}else{h.title="错误！";h.type="error"}$.pnotify(h)}).fail(function(h,j,i){var g=h.responseJSON;$.pnotify({title:"错误提示！",text:g.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})})},action_del:function(a,c,b){$.ajax({url:a,type:"GET",dataType:"json",data:{ids:c}}).done(function(d){if(d.status){$.pnotify({title:"成功删除",text:"删除数据ID为："+c,type:"success",animation:"fade"});b.remove()}else{$.pnotify({title:"没有删除",text:d.msg,type:"error",animation:"fade"})}console.log("success")}).fail(function(e,g,f){var d=e.responseJSON;$.pnotify({title:"错误提示！",text:d.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})},btn_delete:function(a,b){if(b instanceof String){b+=" "}else{b=""}$(b+".select-list").delegate("a.btn-del","click",function(c){c.preventDefault();var e=$(this).attr("data-id");var d=$(this).parents("tr");if(tools.isEmptyValue(d)){d=$(this).parents("li")}bootbox.confirm("确认删除? ID 是"+e,function(f){if(f){ui.action_del(a,e,d)}})});$(b+"a#btn-del").on("click",function(d){d.preventDefault();var c="";var e=$(b+'.select-list input:checked[type="checkbox"].select-it').parent().parent();$(b+'.select-list input:checked[type="checkbox"].select-it').each(function(f,g){if(f){c+=","}c+=g.value});if(c){bootbox.confirm("确认删除所选择的部分?",function(f){if(f){ui.action_del(a,c,e)}})}else{bootbox.alert("还没有做任何的选择！")}})},action_audit:function(b,a){$.ajax({url:b,type:"POST",dataType:"json",data:{ids:a.ids,audit:a.audit,_cfs:$.cookie("_cfc")}}).done(function(c){console.log("success");var d={title:"",text:c.msg,type:"",delay:3000};if(c.status==1){d.title="OK!";if(a.audit==1){d.type="success";a.it.addClass("btn-primary").attr({"data-audit":"0",title:"取消审核"});a.i.addClass("fa-thumbs-up").removeClass("fa-thumbs-down")}else{d.type="notice";a.it.removeClass("btn-primary").attr({"data-audit":"1",title:"审核"});a.i.removeClass("fa-thumbs-up").addClass("fa-thumbs-down")}}else{d.title="错误！";d.type="error"}$.pnotify(d)}).fail(function(d,f,e){var c=d.responseJSON;$.pnotify({title:"错误提示！",text:c.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})},action_audits:function(b,a){$.ajax({url:b,type:"POST",dataType:"json",data:{ids:a.ids,audit:a.audit,_cfs:$.cookie("_cfc")}}).done(function(c){console.log("success");var d={title:"",text:c.msg,type:"",delay:3000};if(c.status==1){d.title="OK!";if(a.audit==1){d.type="success";$(a.its).each(function(e,f){$(f).find(".btn-ajax-audit").addClass("btn-primary").attr({"data-audit":"0",title:"取消审核"});$(f).find(".fa-thumbs-down").addClass("fa-thumbs-up").removeClass("fa-thumbs-down")})}else{d.type="notice";$(a.its).each(function(e,f){$(f).find(".btn-ajax-audit").removeClass("btn-primary").attr({"data-audit":"1",title:"审核"});$(f).find(".fa-thumbs-up").removeClass("fa-thumbs-up").addClass("fa-thumbs-down")})}}else{d.title="错误！";d.type="error"}$.pnotify(d)}).fail(function(d,f,e){var c=d.responseJSON;$.pnotify({title:"错误提示！",text:c.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})},btn_audit:function(a){$(".select-list").delegate(".btn-ajax-audit","click",function(c){c.preventDefault();var b={ids:$(this).attr("data-id"),audit:$(this).attr("data-audit"),it:$(this),i:$(this).children("i")};ui.action_audit(a,b)});$("a#btn-audit").on("click",function(e){e.preventDefault();var c=1;var c=$(this).attr("data-audit");var d="";var f=$('.select-list input:checked[type="checkbox"].select-it').parent().parent();$('.select-list input:checked[type="checkbox"].select-it').each(function(g,h){if(g){d+=","}d+=h.value});var b={ids:d,audit:c,its:f};if(d){bootbox.confirm("确认审核所选择的部分?",function(g){if(g){ui.action_audits(a,b)}})}else{bootbox.alert("还没有做任何的选择！")}})},btn_flag:function(a){$(".select-list").delegate(".btn-ajax-flag","click",function(c){c.preventDefault();var b={id:$(this).attr("data-id"),flag:$(this).attr("data-flag"),it:$(this),i:$(this).children("i")};$.ajax({url:a,type:"POST",dataType:"json",data:{ids:b.id,flag:b.flag,_cfs:$.cookie("_cfc")}}).done(function(d){console.log("success");var e={title:"",text:d.msg,type:"",delay:3000};if(d.status==1){e.title="OK!";if(b.flag==1){e.type="success";b.it.addClass("btn-primary").attr({"data-flag":"0",title:"取消推荐"})}else{e.type="notice";b.it.removeClass("btn-primary").attr({"data-flag":"1",title:"推荐"})}}else{e.title="错误！";e.type="error"}$.pnotify(e)}).fail(function(e,g,f){var d=e.responseJSON;$.pnotify({title:"错误提示！",text:d.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})})},btn_show:function(a){$(".select-list").delegate(".btn-ajax-show","click",function(c){c.preventDefault();var b={id:$(this).attr("data-id"),show:$(this).attr("data-show"),it:$(this),i:$(this).children("i")};$.ajax({url:a,type:"POST",dataType:"json",data:{ids:b.id,show:b.show,_cfs:$.cookie("_cfc")}}).done(function(d){console.log("success");var e={title:"",text:d.msg,type:"",delay:3000};if(d.status==1){e.title=d.msg;if(b.show==1){e.type="success";b.it.addClass("btn-primary").attr("data-show","0");b.i.addClass("fa-eye").removeClass("fa-eye-slash")}else{e.type="notice";b.it.removeClass("btn-primary").attr("data-show","1");b.i.removeClass("fa-eye").addClass("fa-eye-slash")}}else{e.title="错误！";e.type="error"}$.pnotify(e)}).fail(function(e,g,f){var d=e.responseJSON;$.pnotify({title:"错误提示！",text:d.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})})},sortable:function(a,b,c){if(b instanceof String){b=$(b)}else{if(b instanceof Array||b instanceof Node){b=b}else{b=$(".sort-list")}}if(c==undefined||!c){c="desc"}b.sortable({update:function(e,f){var g=$(this).sortable("toArray",{attribute:"data-id"}).toString();var d=$(this).sortable("toArray",{attribute:"data-sort"}).toString();$.ajax({url:a,type:"GET",dataType:"json",data:{ids:g,sort:d,sortby:c}}).done(function(h){console.log("success")}).fail(function(i,k,j){var h=i.responseJSON;$.pnotify({title:"错误提示！",text:h.msg,type:"error",animation:"fade"})}).always(function(){console.log("complete")})},helper:function(f,d){d.children().each(function(){$(this).width($(this).width())});return d}}).disableSelection()},sort_change:function(a){$("input.sortid").on("keyup",function(b){var d=$(this).attr("data-id");var c=$(this).val();$.ajax({url:a,type:"get",dataType:"json",data:{id:d,sortid:c}}).done(function(e){var f={};f.title=e.msg;if(e.status==1){f.type="success"}else{f.type="notice"}$.pnotify(f);console.log("success")}).fail(function(){console.log("error")}).always(function(){console.log("complete")})})},iconcg:function(b,a){$.each(b,function(c,d){$(d).addClass("icon-white")})}};